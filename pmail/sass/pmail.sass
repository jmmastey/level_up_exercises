// PMail CSS

// Variables
$background-color: #fff
$text-color: #111
$primary-color: #0066ff
$secondary-color: #00a352
$secondary-background-color: #eee
$active-background-color: #eefafa
$input-background-color: #fff
$border-color: #ccc

$font-face: Arial, sans-serif
$font-size: 16px

$sidebar-width: 200px

// Mixins
=unselectable
  -webkit-touch-callout: none
  -webkit-user-select: none
  -khtml-user-select: none
  -moz-user-select: none
  -ms-user-select: none
  user-select: none

// BASE

html
  height: 100%
  margin: 0
  padding: 0

body
  font-family: $font-face
  font-size: $font-size
  margin: 0

a, button, input, select, textarea
  outline: none

a
  color: $text-color
  text-decoration: none

button
  background-color: $secondary-background-color
  border: none
  font-size: 0.8em
  min-height: 1.4em
  min-width: 100px

  &:active
    background-color: darken($secondary-background-color, 5%)

input, select
  border: thin solid
  height: 1.25em
  padding: 5px
  -moz-appearance: none !important
  -webkit-appearance: none !important

input
  &[type="checkbox"]
    display: none

    + label span
      display: inline-block
      width: 19px
      height: 19px
      margin: -1px 4px 0 0
      vertical-align: middle
      cursor: pointer
      background: url(../images/input_sprite.png) left top no-repeat

    &:checked + label span
      background: url(../images/input_sprite.png) left -19px no-repeat

ul
  list-style: none
  margin: 0
  padding-left: 0

// LAYOUT
.main-pane
  display: block
  float: right
  font-size: 0.9em
  height: 100%
  padding: 0
  vertical-align: top

  > *
    min-width: 600px

.message-list
  padding-top: 5px
  height: 100%
  width: 99%

  .message
    +unselectable
    border-left: 2px dotted transparent
    cursor: pointer
    display: flex
    max-height: 1.2em
    margin: 0
    padding: 4px 0
    width: 100%

    .message-actions, .message-field
      display: table-cell
      padding: 2px 10px

    .message-field
      &.date
        width: 100px
        text-align: right

      &.subject
        flex-grow: 1

      &.from
        width: 200px

.topbar
  border-bottom: thin solid
  display: flex
  flex-direction: row
  min-height: 52px
  min-width: 800px
  width: 100%
  vertical-align: middle

  &.topbar-primary
    height: 59px
    vertical-align: middle

  > *
    vertical-align: middle

  button
    border-radius: 2px
    padding: 3px 10px


.topbar-links
  height: 50px
  padding: 0 1em
  // Chrome fix:
  -webkit-padding-start: 0

  > ul
    padding: 1em 0
    vertical-align: middle

  li
    display: inline-block
    margin-left: 2em
    position: relative

.sidebar
  display: block
  float: left
  max-width: $sidebar-width
  margin: 0
  text-align: center
  width: $sidebar-width

  .sidebar-main
    padding-top: 10px

  button
    border: none
    border-radius: 4px
    font-size: 0.8em
    padding: 5px
    text-transform: uppercase
    width: 80%

  ul.sidebar-links
    +unselectable
    font-size: 0.9em
    margin: 0
    padding: 5px 0
    text-align: left
    width: 100%

    &:not(:first-of-type)
      border-top: thin solid $border-color

    li
      border-left: 4px solid transparent
      display: inline-block
      margin: 0.2em 0
      padding-left: 20px
      width: 100%

.search-form
  display: flex
  flex: 1
  flex-direction: row
  flex-grow: 1
  margin-top: 0.8em

  input[type="search"]
    border: none
    flex: 1
    max-height: 32px
    padding: 0

    &:focus
      border: none

  button[type="submit"]
    border: none
    border-radius: 0 4px 4px 0
    float: right
    height: 34px
    min-width: 50px

.search-box
  border: thin solid
  display: inline-flex
  flex-direction: row
  flex: 1
  height: 32px
  max-height: 32px
  max-width: 598px
  margin: 0

  input
    margin: 5px

    &:focus
      border: thin solid

  a.dropdown-toggle
    cursor: pointer
    display: inline-block
    padding: 0.5em
    outline: none
    text-align: center

    &:not(:hover)
      color: #999

// MODULE
.brand
  background-image: url('../images/logo.gif')
  background-repeat: no-repeat
  display: inline-block
  margin: 0 30px
  height: 59px
  width: 149px

.dropdown-panel
  border: thin solid
  margin: 0
  position: absolute
  z-index: 10

  &.center
    $width: 300px
    width: $width
    left: ($width / 2) * -1

  &.right
    right: 0

  .dropdown-menu
    font-size: 0.9em
    list-style: none

    li
      display: block
      margin: 0

      a
        display: block
        margin: 0
        padding: 5px

        &:hover
          background-color: $active-background-color

.hidden
  display: none

.dropdown-toggle
  .fa-caret-up
    display: none

  &.active
    .fa-caret-up
      display: inline
    .fa-caret-down
      display: none

// THEME
body
  background: $background-color

@each $style, $color in (primary, $primary-color), (secondary, $secondary-color)
  button.#{$style}-button
    background-color: $color
    @if lightness($color) < 60%
      color: #fff
    @else
      color: #000

    &:hover, &:focus
      background-color: darken($color, 5%)
    &:active
      background-color: darken($color, 10%)

input, select
  background-color: $input-background-color
  border-color: $border-color

input:focus
  border-color: $primary-color

ul.sidebar-links li.active
  border-color: $primary-color

  a
    color: $primary-color
    font-weight: bold

.dropdown-panel
  background-color: $background-color
  border-color: $border-color

.search-box
  background-color: $input-background-color
  border-color: $border-color

  &.focus
    border-color: $primary-color

.topbar
  border-color: $border-color

.topbar-primary
  background-color: $secondary-background-color

.message
  background-color: $secondary-background-color
  border-bottom: thin solid $border-color
  font-size: 0.9em
  min-height: 1.5em

  &.new
    font-weight: bold

  &.active
    background-color: $active-background-color

  &:hover
    border-left: 2px dotted $border-color

footer
  display: flex
  font-size: 0.8em
  line-height: 1.4em
  margin: 2em

  a
    text-decoration: underline

  .line.segmented
    > span
      &:after
        content: " - "

      &:last-child:after
        content: ""

  > .middle
    flex: 1
    text-align: center

  > .right
    text-align: right
