<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>

<div id="event">
  <h1><strong><%=@event.title%></strong><%= notice %></h1>
  <div style="width: 100%; overflow: hidden;">
    <div style="width 200px; height:210px; float: left;">
    <%if @event.picture == "ticket.jpg"%>
       <img src="http://www.cirquecamp.com/wp-content/uploads/2013/12/Future-Google-Now-functions-might-include-acting-as-an-event-ticket.jpg" alt="<%=@event.title%>">
    <%else%>
      <img src="<%=@event.picture%>" alt="<%=@event.title%>">
    <%end%>
    </div>
    <div id="locate" style='width: 300px; margin-left:360px;'>
      <div id="map" style='width: 300px; height: 210px;'></div>
    </div>
  </div>
  <div id="description">
    <p>
      <strong>Title:</strong>
      <%= @event.title %> @ <strong><%=link_to @venue.name, @venue%></strong>
    </p>
    <p>
      <strong>Avg price:</strong>
      <%= number_to_currency(@event.avg_price) %>
    </p>

    <p>
      <strong>Low price:</strong>
      <%= number_to_currency(@event.low_price) %>
    </p>

    <%= link_to 'Back', events_path,  class:"btn btn-primary" %>
    <%unless @event.avg_price ==0%>
        <%= link_to 'Buy Tickets Now!', @event.link, class: 'btn btn-info btn-xs'%>
    <%end%>
  </div>
</div>
<script type="text/javascript">
  handler = Gmaps.build('Google');
handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
  markers = handler.addMarkers(<%=raw @hash.to_json %>);
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
  handler.getMap().setZoom(17);
});
</script>
