# Most useful invocation seems to be:
#     $ rubocop --display-cop-name --format simple
#
# Run `rubocop --show-cops` to see the full list of cops and their configs.
#
# See also:
# * https://github.com/bbatsov/rubocop/blob/master/config/enabled.yml
# * https://github.com/bbatsov/rubocop/blob/master/config/default.yml

AllCops:
  RunRailsCops: true
  Exclude:
  - 'bin/**/*'
  - 'config/**/*.rb'
  - 'db/**/*.rb'
  - 'lib/**/*.rake'
  - 'script/**/*'
  - 'vendor/**/*'
  - 'Guardfile'
#  - 'spec/spec_helper.rb'

Rails/Validation:
  Enabled: false

Lint/AssignmentInCondition:
  Enabled: false

# habtm has legitimate use cases. sort of.
Rails/HasAndBelongsToMany:
  Enabled: false

# read_attribute() is generally clearer than self[].
Rails/ReadWriteAttribute:
  Enabled: false

# Permit `head 200 and return if ...`, but never `if foo and bar`
Style/AndOr:
  EnforcedStyle: conditionals

Style/AlignParameters:
  Enabled: false

Style/Blocks:
  Enabled: false

Style/ClassCheck:
  # This is an arbitrary choice, but aligns with `be_kind_of` in rspec, which
  # reads (IMO) better than `be_a`.
  EnforcedStyle: kind_of?

Style/Documentation:
  Enabled: false

Style/DotPosition:
  Enabled: false

Style/DoubleNegation:
  Enabled: false

Style/EmptyLiteral:
  Enabled: false

Style/EmptyLines:
  Enabled: false

Style/EmptyLinesAroundBody:
  Enabled: false

Style/Encoding:
  EnforcedStyle: when_needed

Style/FormatString:
  Enabled: false

Style/GuardClause:
  Enabled: false

# Using the modifier syntax `foo if bar?` is fine, but can prevent accurate
# branch coverage analysis; we definitely shouldn't *require* modifier syntax.
Style/IfUnlessModifier:
  Enabled: false

Style/IndentHash:
  Enabled: false

Style/PercentLiteralDelimiters:
  # Rationale:
  # * if it produces a string, use ();
  # * if it produces an array, use [];
  # * the rest are just the defaults
  PreferredDelimiters:
    '%':  '()'
    '%q': '()'
    '%Q': '()'
    '%i': '[]'
    '%w': '[]'
    '%W': '[]'
    '%s': '()'
    '%r': '{}'
    '%x': '()'

Style/PerlBackrefs:
  Enabled: false

Style/PredicateName:
  Enabled: false

Style/RaiseArgs:
  Enabled: false

Style/SignalException:
  Enabled: false

Style/SingleSpaceBeforeFirstArg:
  Enabled: false

Style/SpaceInsideHashLiteralBraces:
  Enabled: false

Style/SpaceInsideBrackets:
  Enabled: false

Style/StringLiterals:
  Enabled: false


# Reduce over time:

Metrics/BlockNesting:
  Max: 4

Metrics/CyclomaticComplexity:
  Max: 37

Metrics/ClassLength:
  Max: 620

Metrics/LineLength:
  Max: 220

Metrics/MethodLength:
  Max: 75

Metrics/ParameterLists:
  Max: 5

Metrics/PerceivedComplexity:
  Max: 38

# These should be enabled as we are able to pass them:

Lint/UnusedBlockArgument:
  Enabled: false

Lint/UnusedMethodArgument:
  Enabled: false

Rails/Delegate:
  Enabled: false

Style/AlignHash:
  Enabled: false

# We currently have PhoneNumberHistory#set_phone_number_for
Style/AccessorMethodName:
  Enabled: false

Style/ClassAndModuleChildren:
  Enabled: false

# Survey code currently uses class variables
Style/ClassVars:
  Enabled: false

# Used in a number of places to guard against JSON parse failures, apparently.
Style/RescueModifier:
  Enabled: false
